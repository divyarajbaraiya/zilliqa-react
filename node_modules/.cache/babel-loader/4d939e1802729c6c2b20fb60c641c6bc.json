{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('cross-fetch'), require('mitt')) : typeof define === 'function' && define.amd ? define(['exports', 'cross-fetch', 'mitt'], factory) : factory(global.zjsCore = {}, global['cross-fetch'], global.mitt);\n})(this, function (exports, fetch, mitt) {\n  'use strict';\n\n  fetch = fetch && fetch.hasOwnProperty('default') ? fetch['default'] : fetch;\n  mitt = mitt && mitt.hasOwnProperty('default') ? mitt['default'] : mitt; //  This file is part of Zilliqa-Javascript-Library.\n  //\n  //  This program is free software: you can redistribute it and/or modify\n  //  it under the terms of the GNU General Public License as published by\n  //  the Free Software Foundation, either version 3 of the License, or\n  //  (at your option) any later version.\n  //\n  //   This program is distributed in the hope that it will be useful,\n  //   but WITHOUT ANY WARRANTY; without even the implied warranty of\n  //   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  //   GNU General Public License for more details.\n  //\n  //   You should have received a copy of the GNU General Public License\n  //   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n  var Signer = function () {\n    function Signer() {}\n\n    return Signer;\n  }();\n\n  var TxBlockType;\n\n  (function (TxBlockType) {\n    TxBlockType[TxBlockType[\"MICRO\"] = 0] = \"MICRO\";\n    TxBlockType[TxBlockType[\"FINAL\"] = 1] = \"FINAL\";\n  })(TxBlockType || (TxBlockType = {}));\n\n  (function (TransactionError) {\n    TransactionError[TransactionError[\"CHECKER_FAILED\"] = 0] = \"CHECKER_FAILED\";\n    TransactionError[TransactionError[\"RUNNER_FAILED\"] = 1] = \"RUNNER_FAILED\";\n    TransactionError[TransactionError[\"BALANCE_TRANSFER_FAILED\"] = 2] = \"BALANCE_TRANSFER_FAILED\";\n    TransactionError[TransactionError[\"EXECUTE_CMD_FAILED\"] = 3] = \"EXECUTE_CMD_FAILED\";\n    TransactionError[TransactionError[\"EXECUTE_CMD_TIMEOUT\"] = 4] = \"EXECUTE_CMD_TIMEOUT\";\n    TransactionError[TransactionError[\"NO_GAS_REMAINING_FOUND\"] = 5] = \"NO_GAS_REMAINING_FOUND\";\n    TransactionError[TransactionError[\"NO_ACCEPTED_FOUND\"] = 6] = \"NO_ACCEPTED_FOUND\";\n    TransactionError[TransactionError[\"CALL_CONTRACT_FAILED\"] = 7] = \"CALL_CONTRACT_FAILED\";\n    TransactionError[TransactionError[\"CREATE_CONTRACT_FAILED\"] = 8] = \"CREATE_CONTRACT_FAILED\";\n    TransactionError[TransactionError[\"JSON_OUTPUT_CORRUPTED\"] = 9] = \"JSON_OUTPUT_CORRUPTED\";\n    TransactionError[TransactionError[\"CONTRACT_NOT_EXIST\"] = 10] = \"CONTRACT_NOT_EXIST\";\n    TransactionError[TransactionError[\"STATE_CORRUPTED\"] = 11] = \"STATE_CORRUPTED\";\n    TransactionError[TransactionError[\"LOG_ENTRY_INSTALL_FAILED\"] = 12] = \"LOG_ENTRY_INSTALL_FAILED\";\n    TransactionError[TransactionError[\"MESSAGE_CORRUPTED\"] = 13] = \"MESSAGE_CORRUPTED\";\n    TransactionError[TransactionError[\"RECEIPT_IS_NULL\"] = 14] = \"RECEIPT_IS_NULL\";\n    TransactionError[TransactionError[\"MAX_DEPTH_REACHED\"] = 15] = \"MAX_DEPTH_REACHED\";\n    TransactionError[TransactionError[\"CHAIN_CALL_DIFF_SHARD\"] = 16] = \"CHAIN_CALL_DIFF_SHARD\";\n    TransactionError[TransactionError[\"PREPARATION_FAILED\"] = 17] = \"PREPARATION_FAILED\";\n    TransactionError[TransactionError[\"NO_OUTPUT\"] = 18] = \"NO_OUTPUT\";\n    TransactionError[TransactionError[\"OUTPUT_ILLEGAL\"] = 19] = \"OUTPUT_ILLEGAL\";\n  })(exports.TransactionError || (exports.TransactionError = {}));\n  /*! *****************************************************************************\r\n  Copyright (c) Microsoft Corporation. All rights reserved.\r\n  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n  this file except in compliance with the License. You may obtain a copy of the\r\n  License at http://www.apache.org/licenses/LICENSE-2.0\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n  MERCHANTABLITY OR NON-INFRINGEMENT.\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n  and limitations under the License.\r\n  ***************************************************************************** */\n\n  /* global Reflect, Promise */\n\n\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  function __extends(d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  }\n\n  var __assign = function () {\n    __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n\n      return t;\n    };\n\n    return __assign.apply(this, arguments);\n  };\n\n  function __awaiter(thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n\n      function step(result) {\n        result.done ? resolve(result.value) : new P(function (resolve) {\n          resolve(result.value);\n        }).then(fulfilled, rejected);\n      }\n\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  }\n\n  function __generator(thisArg, body) {\n    var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n        f,\n        y,\n        t,\n        g;\n    return g = {\n      next: verb(0),\n      \"throw\": verb(1),\n      \"return\": verb(2)\n    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n      return this;\n    }), g;\n\n    function verb(n) {\n      return function (v) {\n        return step([n, v]);\n      };\n    }\n\n    function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n\n      while (_) try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n\n      if (op[0] & 5) throw op[1];\n      return {\n        value: op[0] ? op[1] : void 0,\n        done: true\n      };\n    }\n  }\n\n  function __values(o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n        i = 0;\n    if (m) return m.call(o);\n    return {\n      next: function () {\n        if (o && i >= o.length) o = void 0;\n        return {\n          value: o && o[i++],\n          done: !o\n        };\n      }\n    };\n  }\n\n  function __read(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o),\n        r,\n        ar = [],\n        e;\n\n    try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    } catch (error) {\n      e = {\n        error: error\n      };\n    } finally {\n      try {\n        if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      } finally {\n        if (e) throw e.error;\n      }\n    }\n\n    return ar;\n  }\n\n  function __spread() {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n    return ar;\n  } //  This file is part of Zilliqa-Javascript-Library.\n\n  /**\r\n   * sign\r\n   *\r\n   * This decorates a method by attempting to sign the first argument of the\r\n   * intercepted method.\r\n   *\r\n   * @param {T} target\r\n   * @param {K} key\r\n   * @param {PropertyDescriptor} descriptor\r\n   * @returns {PropertyDescriptor | undefined}\r\n   */\n\n\n  var sign = function (target, key, descriptor) {\n    var original = descriptor.value;\n\n    function interceptor(arg) {\n      var args = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n\n      return __awaiter(this, void 0, void 0, function () {\n        var signed;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!(original && arg.bytes)) return [3\n              /*break*/\n              , 2];\n              return [4\n              /*yield*/\n              , this.signer.sign(arg)];\n\n            case 1:\n              signed = _a.sent();\n              return [2\n              /*return*/\n              , original.call.apply(original, __spread([this, signed], args))];\n\n            case 2:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    }\n\n    descriptor.value = interceptor;\n    return descriptor;\n  }; //  This file is part of Zilliqa-Javascript-Library.\n  //  This file is part of Zilliqa-Javascript-Library.\n\n\n  (function (RPCMethod) {\n    // Network-related methods\n    RPCMethod[\"GetNetworkId\"] = \"GetNetworkId\"; // Blockchain-related methods\n\n    RPCMethod[\"GetBlockchainInfo\"] = \"GetBlockchainInfo\";\n    RPCMethod[\"GetShardingStructure\"] = \"GetShardingStructure\";\n    RPCMethod[\"GetDSBlock\"] = \"GetDsBlock\";\n    RPCMethod[\"GetLatestDSBlock\"] = \"GetLatestDsBlock\";\n    RPCMethod[\"GetNumDSBlocks\"] = \"GetNumDSBlocks\";\n    RPCMethod[\"GetDSBlockRate\"] = \"GetDSBlockRate\";\n    RPCMethod[\"DSBlockListing\"] = \"DSBlockListing\";\n    RPCMethod[\"GetTxBlock\"] = \"GetTxBlock\";\n    RPCMethod[\"GetLatestTxBlock\"] = \"GetLatestTxBlock\";\n    RPCMethod[\"GetNumTxBlocks\"] = \"GetNumTxBlocks\";\n    RPCMethod[\"GetTxBlockRate\"] = \"GetTxBlockRate\";\n    RPCMethod[\"TxBlockListing\"] = \"TxBlockListing\";\n    RPCMethod[\"GetNumTransactions\"] = \"GetNumTransactions\";\n    RPCMethod[\"GetTransactionRate\"] = \"GetTransactionRate\";\n    RPCMethod[\"GetCurrentMiniEpoch\"] = \"GetCurrentMiniEpoch\";\n    RPCMethod[\"GetCurrentDSEpoch\"] = \"GetCurrentDSEpoch\";\n    RPCMethod[\"GetPrevDifficulty\"] = \"GetPrevDifficulty\";\n    RPCMethod[\"GetPrevDSDifficulty\"] = \"GetPrevDSDifficulty\";\n    RPCMethod[\"GetTotalCoinSupply\"] = \"GetTotalCoinSupply\";\n    RPCMethod[\"GetMinerInfo\"] = \"GetMinerInfo\"; // Transaction-related methods\n\n    RPCMethod[\"CreateTransaction\"] = \"CreateTransaction\";\n    RPCMethod[\"GetTransaction\"] = \"GetTransaction\";\n    RPCMethod[\"GetRecentTransactions\"] = \"GetRecentTransactions\";\n    RPCMethod[\"GetTransactionsForTxBlock\"] = \"GetTransactionsForTxBlock\";\n    RPCMethod[\"GetTxnBodiesForTxBlock\"] = \"GetTxnBodiesForTxBlock\";\n    RPCMethod[\"GetNumTxnsTxEpoch\"] = \"GetNumTxnsTxEpoch\";\n    RPCMethod[\"GetNumTxnsDSEpoch\"] = \"GetNumTxnsDSEpoch\";\n    RPCMethod[\"GetMinimumGasPrice\"] = \"GetMinimumGasPrice\";\n    RPCMethod[\"GetPendingTxn\"] = \"GetPendingTxn\";\n    RPCMethod[\"GetPendingTxns\"] = \"GetPendingTxns\"; // Contract-related methods\n\n    RPCMethod[\"GetSmartContracts\"] = \"GetSmartContracts\";\n    RPCMethod[\"GetSmartContractCode\"] = \"GetSmartContractCode\";\n    RPCMethod[\"GetSmartContractInit\"] = \"GetSmartContractInit\";\n    RPCMethod[\"GetSmartContractState\"] = \"GetSmartContractState\";\n    RPCMethod[\"GetSmartContractSubState\"] = \"GetSmartContractSubState\";\n    RPCMethod[\"GetContractAddressFromTransactionID\"] = \"GetContractAddressFromTransactionID\"; // Account-related methods\n\n    RPCMethod[\"GetBalance\"] = \"GetBalance\";\n  })(exports.RPCMethod || (exports.RPCMethod = {}));\n\n  (function (RPCErrorCode) {\n    // Standard JSON-RPC 2.0 errors\n    // RPC_INVALID_REQUEST is internally mapped to HTTP_BAD_REQUEST (400).\n    // It should not be used for application-layer errors.\n    RPCErrorCode[RPCErrorCode[\"RPC_INVALID_REQUEST\"] = -32600] = \"RPC_INVALID_REQUEST\"; // RPC_METHOD_NOT_FOUND is internally mapped to HTTP_NOT_FOUND (404).\n    // It should not be used for application-layer errors.\n\n    RPCErrorCode[RPCErrorCode[\"RPC_METHOD_NOT_FOUND\"] = -32601] = \"RPC_METHOD_NOT_FOUND\";\n    RPCErrorCode[RPCErrorCode[\"RPC_INVALID_PARAMS\"] = -32602] = \"RPC_INVALID_PARAMS\"; // RPC_INTERNAL_ERROR should only be used for genuine errors in bitcoind\n    // (for example datadir corruption).\n\n    RPCErrorCode[RPCErrorCode[\"RPC_INTERNAL_ERROR\"] = -32603] = \"RPC_INTERNAL_ERROR\";\n    RPCErrorCode[RPCErrorCode[\"RPC_PARSE_ERROR\"] = -32700] = \"RPC_PARSE_ERROR\"; // General application defined errors\n\n    RPCErrorCode[RPCErrorCode[\"RPC_MISC_ERROR\"] = -1] = \"RPC_MISC_ERROR\";\n    RPCErrorCode[RPCErrorCode[\"RPC_TYPE_ERROR\"] = -3] = \"RPC_TYPE_ERROR\";\n    RPCErrorCode[RPCErrorCode[\"RPC_INVALID_ADDRESS_OR_KEY\"] = -5] = \"RPC_INVALID_ADDRESS_OR_KEY\";\n    RPCErrorCode[RPCErrorCode[\"RPC_INVALID_PARAMETER\"] = -8] = \"RPC_INVALID_PARAMETER\";\n    RPCErrorCode[RPCErrorCode[\"RPC_DATABASE_ERROR\"] = -20] = \"RPC_DATABASE_ERROR\";\n    RPCErrorCode[RPCErrorCode[\"RPC_DESERIALIZATION_ERROR\"] = -22] = \"RPC_DESERIALIZATION_ERROR\";\n    RPCErrorCode[RPCErrorCode[\"RPC_VERIFY_ERROR\"] = -25] = \"RPC_VERIFY_ERROR\";\n    RPCErrorCode[RPCErrorCode[\"RPC_VERIFY_REJECTED\"] = -26] = \"RPC_VERIFY_REJECTED\";\n    RPCErrorCode[RPCErrorCode[\"RPC_IN_WARMUP\"] = -28] = \"RPC_IN_WARMUP\";\n    RPCErrorCode[RPCErrorCode[\"RPC_METHOD_DEPRECATED\"] = -32] = \"RPC_METHOD_DEPRECATED\";\n  })(exports.RPCErrorCode || (exports.RPCErrorCode = {}));\n\n  var DEFAULT_HEADERS = {\n    'Content-Type': 'application/json'\n  };\n\n  var performRPC = function (request, handler) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var response, err_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            _a.trys.push([0, 2,, 3]);\n\n            return [4\n            /*yield*/\n            , fetch(request.url, {\n              method: 'POST',\n              cache: 'no-cache',\n              mode: 'cors',\n              redirect: 'follow',\n              referrer: 'no-referrer',\n              body: JSON.stringify(request.payload),\n              headers: __assign(__assign({}, DEFAULT_HEADERS), request.options && request.options.headers || {})\n            })];\n\n          case 1:\n            response = _a.sent();\n            return [2\n            /*return*/\n            , response.json().then(function (body) {\n              return __assign(__assign({}, body), {\n                req: request\n              });\n            }).then(handler)];\n\n          case 2:\n            err_1 = _a.sent();\n            throw err_1;\n\n          case 3:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }; //  This file is part of Zilliqa-Javascript-Library.\n  //\n  //  This program is free software: you can redistribute it and/or modify\n  //  it under the terms of the GNU General Public License as published by\n  //  the Free Software Foundation, either version 3 of the License, or\n  //  (at your option) any later version.\n  //\n  //   This program is distributed in the hope that it will be useful,\n  //   but WITHOUT ANY WARRANTY; without even the implied warranty of\n  //   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  //   GNU General Public License for more details.\n  //\n  //   You should have received a copy of the GNU General Public License\n  //   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n\n  function isValidResponse(response) {\n    if (response.jsonrpc === '2.0' && (response.id === '1' || response.id === 1) && (response.error || response.result)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  function composeMiddleware() {\n    var fns = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      fns[_i] = arguments[_i];\n    }\n\n    if (fns.length === 0) {\n      return function (arg) {\n        return arg;\n      };\n    }\n\n    if (fns.length === 1) {\n      return fns[0];\n    }\n\n    return fns.reduce(function (a, b) {\n      return function (arg) {\n        return a(b(arg));\n      };\n    });\n  } //  This file is part of Zilliqa-Javascript-Library.\n\n\n  var MiddlewareType;\n\n  (function (MiddlewareType) {\n    MiddlewareType[MiddlewareType[\"REQ\"] = 0] = \"REQ\";\n    MiddlewareType[MiddlewareType[\"RES\"] = 1] = \"RES\";\n  })(MiddlewareType || (MiddlewareType = {}));\n\n  var BaseProvider = function () {\n    function BaseProvider(nodeURL, reqMiddleware, resMiddleware) {\n      var _this = this;\n\n      if (reqMiddleware === void 0) {\n        reqMiddleware = new Map();\n      }\n\n      if (resMiddleware === void 0) {\n        resMiddleware = new Map();\n      }\n\n      this.middleware = {\n        request: {\n          use: function (fn, match) {\n            if (match === void 0) {\n              match = '*';\n            }\n\n            _this.pushMiddleware(fn, 0\n            /* REQ */\n            , match);\n          }\n        },\n        response: {\n          use: function (fn, match) {\n            if (match === void 0) {\n              match = '*';\n            }\n\n            _this.pushMiddleware(fn, 1\n            /* RES */\n            , match);\n          }\n        }\n      };\n      this.nodeURL = nodeURL;\n      this.reqMiddleware = reqMiddleware;\n      this.resMiddleware = resMiddleware;\n    }\n    /**\r\n     * pushMiddleware\r\n     *\r\n     * Adds the middleware to the appropriate middleware map.\r\n     *\r\n     * @param {ResMiddlewareFn}\r\n     * @param {T} type\r\n     * @param {Matcher} match\r\n     * @returns {void}\r\n     */\n\n\n    BaseProvider.prototype.pushMiddleware = function (fn, type, match) {\n      if (type !== 0\n      /* REQ */\n      && type !== 1\n      /* RES */\n      ) {\n        throw new Error('Please specify the type of middleware being added');\n      }\n\n      if (type === 0\n      /* REQ */\n      ) {\n        var current = this.reqMiddleware.get(match) || [];\n        this.reqMiddleware.set(match, __spread(current, [fn]));\n      } else {\n        var current = this.resMiddleware.get(match) || [];\n        this.resMiddleware.set(match, __spread(current, [fn]));\n      }\n    };\n    /**\r\n     * getMiddleware\r\n     *\r\n     * Returns the middleware that matches the matcher provided. Note that\r\n     * middleware are called in order of specificity: string -> regexp ->\r\n     * wildcard.\r\n     *\r\n     * @param {Matcher} match\r\n     * @returns {[ReqMiddlewareFn[], ResMiddlewareFn[]]}\r\n     */\n\n\n    BaseProvider.prototype.getMiddleware = function (method) {\n      var e_1, _a, e_2, _b;\n\n      var reqFns = [];\n      var resFns = [];\n\n      try {\n        for (var _c = __values(this.reqMiddleware.entries()), _d = _c.next(); !_d.done; _d = _c.next()) {\n          var _e = __read(_d.value, 2),\n              key = _e[0],\n              transformers = _e[1];\n\n          if (typeof key === 'string' && key !== '*' && key === method) {\n            reqFns.push.apply(reqFns, __spread(transformers));\n          }\n\n          if (key instanceof RegExp && key.test(method)) {\n            reqFns.push.apply(reqFns, __spread(transformers));\n          }\n\n          if (key === '*') {\n            reqFns.push.apply(reqFns, __spread(transformers));\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      try {\n        for (var _f = __values(this.resMiddleware.entries()), _g = _f.next(); !_g.done; _g = _f.next()) {\n          var _h = __read(_g.value, 2),\n              key = _h[0],\n              transformers = _h[1];\n\n          if (typeof key === 'string' && key !== '*' && key === method) {\n            resFns.push.apply(resFns, __spread(transformers));\n          }\n\n          if (key instanceof RegExp && key.test(method)) {\n            resFns.push.apply(resFns, __spread(transformers));\n          }\n\n          if (key === '*') {\n            resFns.push.apply(resFns, __spread(transformers));\n          }\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n\n      return [reqFns, resFns];\n    };\n\n    return BaseProvider;\n  }(); //  This file is part of Zilliqa-Javascript-Library.\n\n\n  var HTTPProvider = function (_super) {\n    __extends(HTTPProvider, _super);\n\n    function HTTPProvider() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    HTTPProvider.prototype.buildPayload = function (method, params) {\n      return {\n        url: this.nodeURL,\n        payload: {\n          id: 1,\n          jsonrpc: '2.0',\n          method: method,\n          params: params\n        }\n      };\n    };\n\n    HTTPProvider.prototype.send = function (method) {\n      var params = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        params[_i - 1] = arguments[_i];\n      }\n\n      var _a = __read(this.getMiddleware(method), 2),\n          tReq = _a[0],\n          tRes = _a[1];\n\n      var reqMiddleware = composeMiddleware.apply(void 0, __spread(tReq));\n      var resMiddleware = composeMiddleware.apply(void 0, __spread(tRes));\n      var req = reqMiddleware(this.buildPayload(method, params));\n      return performRPC(req, resMiddleware);\n    };\n\n    HTTPProvider.prototype.subscribe = function (event, subscriber) {\n      throw new Error('HTTPProvider does not support subscriptions.');\n    };\n\n    HTTPProvider.prototype.unsubscribe = function (token) {\n      throw new Error('HTTPProvider does not support subscriptions.');\n    };\n\n    return HTTPProvider;\n  }(BaseProvider); //  This file is part of Zilliqa-Javascript-Library.\n  //\n  //  This program is free software: you can redistribute it and/or modify\n  //  it under the terms of the GNU General Public License as published by\n  //  the Free Software Foundation, either version 3 of the License, or\n  //  (at your option) any later version.\n  //\n  //   This program is distributed in the hope that it will be useful,\n  //   but WITHOUT ANY WARRANTY; without even the implied warranty of\n  //   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  //   GNU General Public License for more details.\n  //\n  //   You should have received a copy of the GNU General Public License\n  //   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  // this constant is used to indicate the number of times to poll the\n  // blockchain for a transaction confirmation. this number has been selected by\n  // using a heuristic to calculate the approximate maximum amount of time it\n  // should take for a transaction to be confirmed, even during a PoW submission\n  // round.\n\n\n  var GET_TX_ATTEMPTS = 33;\n\n  var EventEmitter = function () {\n    function EventEmitter() {\n      var _this = this;\n\n      this.handlers = {};\n      this.emitter = new mitt(this.handlers);\n      this.off = this.emitter.off.bind(this);\n      this.emit = this.emitter.emit.bind(this); // tslint:disable-next-line: no-empty\n\n      this.promise = new Promise(function (resolve, reject) {\n        _this.resolve = resolve;\n        _this.reject = reject;\n      });\n      this.then = this.promise.then.bind(this.promise);\n    }\n\n    EventEmitter.prototype.resetHandlers = function () {\n      // tslint:disable-next-line: forin\n      for (var i in this.handlers) {\n        delete this.handlers[i];\n      }\n    };\n\n    EventEmitter.prototype.on = function (type, handler) {\n      this.emitter.on(type, handler);\n      return this;\n    };\n\n    EventEmitter.prototype.once = function (type, handler) {\n      var _this = this;\n\n      this.emitter.on(type, function (e) {\n        handler(e);\n\n        _this.removeEventListener(type);\n      });\n    };\n\n    EventEmitter.prototype.addEventListener = function (type, handler) {\n      this.emitter.on(type, handler);\n    };\n\n    EventEmitter.prototype.removeEventListener = function (type, handler) {\n      if (!type) {\n        this.handlers = {};\n        return;\n      }\n\n      if (!handler) {\n        delete this.handlers[type];\n      } else {\n        return this.emitter.off(type, handler);\n      }\n    };\n\n    EventEmitter.prototype.onError = function (error) {\n      this.emitter.on('error', error);\n      this.removeEventListener('*');\n    };\n\n    EventEmitter.prototype.onData = function (data) {\n      this.emitter.on('data', data);\n      this.removeEventListener('*');\n    };\n\n    EventEmitter.prototype.listenerCount = function (listenKey) {\n      var count = 0;\n      Object.keys(this.handlers).forEach(function (val) {\n        if (listenKey === val) {\n          count += 1;\n        }\n      });\n      return count;\n    };\n\n    return EventEmitter;\n  }(); //  This file is part of Zilliqa-Javascript-Library.\n\n\n  exports.Signer = Signer;\n  exports.sign = sign;\n  exports.performRPC = performRPC;\n  exports.isValidResponse = isValidResponse;\n  exports.composeMiddleware = composeMiddleware;\n  exports.HTTPProvider = HTTPProvider;\n  exports.GET_TX_ATTEMPTS = GET_TX_ATTEMPTS;\n  exports.EventEmitter = EventEmitter;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["../src/types.ts","../../../node_modules/tslib/tslib.es6.js","../src/decorators/sign.ts","../src/decorators/index.ts","../src/net.ts","../src/util.ts","../src/providers/base.ts","../src/providers/http.ts","../src/constants.ts","../src/eventEmitter.ts","../src/index.ts"],"names":["TransactionError","RPCMethod","RPCErrorCode"],"mappings":"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","sourcesContent":["//  This file is part of Zilliqa-Javascript-Library.\n//\n//  This program is free software: you can redistribute it and/or modify\n//  it under the terms of the GNU General Public License as published by\n//  the Free Software Foundation, either version 3 of the License, or\n//  (at your option) any later version.\n//\n//   This program is distributed in the hope that it will be useful,\n//   but WITHOUT ANY WARRANTY; without even the implied warranty of\n//   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//   GNU General Public License for more details.\n//\n//   You should have received a copy of the GNU General Public License\n//   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { RPCResponse } from './net';\nimport { Middleware } from './util';\n\nexport type Subscriber = (event: any) => void;\nexport type Subscribers = Map<SubscriptionToken, Subscriber>;\ntype SubscriptionToken = symbol;\n\nexport interface Provider {\n  middleware: Middleware;\n  // TODO: strict typing when we have a better idea of how to generalise the\n  // payloads sent to lookup nodes - protobuf?\n  send<R = any, E = string>(\n    method: string,\n    ...params: any[]\n  ): Promise<RPCResponse<R, E>>;\n\n  subscribe?(event: string, subscriber: Subscriber): symbol;\n\n  unsubscribe?(token: symbol): void;\n}\n\nexport abstract class Signer {\n  abstract sign(payload: Signable): Promise<Signable>;\n}\n\nexport interface Signable {\n  bytes: Buffer;\n}\n\n/**\n * ZilliqaModule\n *\n * This interface must be implemented by all top-level modules.\n */\nexport interface ZilliqaModule {\n  provider: Provider;\n  signer: Signer;\n}\n\nexport interface BlockchainInfo {\n  NumPeers: number;\n  NumTxBlocks: string;\n  NumDSBlocks: string;\n  NumTransactions: string;\n  TransactionRate: number;\n  TxBlockRate: number;\n  DSBlockRate: number;\n  CurrentMiniEpoch: string;\n  CurrentDSEpoch: string;\n  NumTxnsDSEpoch: string;\n  NumTxnsTxEpoch: string;\n  ShardingStructure: ShardingStructure;\n}\n\nexport interface ShardingStructure {\n  NumPeers: number[];\n}\n\nexport interface TransactionObj {\n  ID: string;\n  version: string;\n  nonce: string;\n  toAddr: string;\n  amount: string;\n  code: string;\n  data: string;\n  gasPrice: string;\n  gasLimit: string;\n  signature: string;\n  senderPubKey: string;\n  receipt: TransactionReceiptObj;\n}\n\nexport interface DsBlockHeader {\n  BlockNum: string;\n  Difficulty: number;\n  DifficultyDS: number;\n  GasPrice: number;\n  LeaderPubKey: string;\n  PoWWinners: string[];\n  PrevHash: string;\n  // unix epoch\n  Timestamp: string;\n}\n\nexport interface DsBlockObj {\n  header: DsBlockHeader;\n  signature: string;\n}\n\ninterface BlockShort {\n  BlockNum: number;\n  Hash: string;\n}\n\nexport interface BlockList {\n  data: BlockShort[];\n  maxPages: number;\n}\n\nconst enum TxBlockType {\n  MICRO,\n  FINAL,\n}\n\nexport interface TxBlockHeader {\n  BlockNum: string;\n  DSBlockNum: string;\n  GasLimit: string;\n  GasUsed: string;\n  MbInfoHash: string;\n  MinerPubKey: string;\n  NumMicroBlocks: number;\n  NumTxns: number;\n  PrevBlockHash: string;\n  Rewards: string;\n  StateDeltaHash: string;\n  StateRootHash: string;\n  Timestamp: string;\n  Version: number;\n\n  Type: TxBlockType;\n}\n\nexport interface MicroBlockInfoObj {\n  MicroBlockHash: string;\n  MicroBlockShardId: number;\n  MicroBlockTxnRootHash: string;\n}\n\nexport interface TxBlockObj {\n  body: {\n    BlockHash: string;\n    HeaderSign: string;\n    MicroBlockInfos: MicroBlockInfoObj[];\n  };\n  header: TxBlockHeader;\n}\n\nexport interface TxList {\n  number: number;\n  TxnHashes: string[];\n}\n\nexport enum TransactionError {\n  CHECKER_FAILED = 0,\n  RUNNER_FAILED,\n  BALANCE_TRANSFER_FAILED,\n  EXECUTE_CMD_FAILED,\n  EXECUTE_CMD_TIMEOUT,\n  NO_GAS_REMAINING_FOUND,\n  NO_ACCEPTED_FOUND,\n  CALL_CONTRACT_FAILED,\n  CREATE_CONTRACT_FAILED,\n  JSON_OUTPUT_CORRUPTED,\n  CONTRACT_NOT_EXIST,\n  STATE_CORRUPTED,\n  LOG_ENTRY_INSTALL_FAILED,\n  MESSAGE_CORRUPTED,\n  RECEIPT_IS_NULL,\n  MAX_DEPTH_REACHED,\n  CHAIN_CALL_DIFF_SHARD,\n  PREPARATION_FAILED,\n  NO_OUTPUT,\n  OUTPUT_ILLEGAL,\n}\n\nexport interface TransactionErrorObj {\n  [depth: number]: TransactionError[];\n}\n\nexport interface TransactionReceiptObj<TGas = string> {\n  cumulative_gas: TGas;\n  epoch_num: string;\n  event_logs: EventLogEntry[];\n  exceptions: ExceptionEntry[];\n  success: boolean;\n  transitions: TransitionEntry[];\n  errors: any;\n}\n\nexport interface ExceptionEntry {\n  line: number;\n  message: string;\n}\n\nexport interface EventLogEntry {\n  address: string;\n  _eventname: string;\n  params: EventParam[];\n}\n\nexport interface TransitionEntry {\n  addr: string;\n  depth: number;\n  msg: TransitionMsg;\n}\n\nexport interface TransitionMsg {\n  _amount: string;\n  _recipient: string;\n  _tag: string;\n  params: EventParam[];\n}\n\nexport interface EventParam {\n  vname: string;\n  type: string;\n  value: any;\n}\n\nexport interface PendingTxns {\n  Txns: TransactionStatus[];\n}\n\nexport interface TransactionStatus {\n  Status: number;\n  TxnHash: string;\n}\n\nexport interface PendingTxnResult {\n  code: number;\n  confirmed: boolean;\n  info: string;\n}\n\nexport interface MinerInfo {\n  dscommittee: string[];\n  shards: ShardInfo[];\n}\n\nexport interface ShardInfo {\n  nodes: string[];\n  size: number;\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","//  This file is part of Zilliqa-Javascript-Library.\n//\n//  This program is free software: you can redistribute it and/or modify\n//  it under the terms of the GNU General Public License as published by\n//  the Free Software Foundation, either version 3 of the License, or\n//  (at your option) any later version.\n//\n//   This program is distributed in the hope that it will be useful,\n//   but WITHOUT ANY WARRANTY; without even the implied warranty of\n//   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//   GNU General Public License for more details.\n//\n//   You should have received a copy of the GNU General Public License\n//   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { Signable, ZilliqaModule } from '../types';\n\n/**\n * sign\n *\n * This decorates a method by attempting to sign the first argument of the\n * intercepted method.\n *\n * @param {T} target\n * @param {K} key\n * @param {PropertyDescriptor} descriptor\n * @returns {PropertyDescriptor | undefined}\n */\nexport const sign = <T, K extends keyof T>(\n  target: T,\n  key: K,\n  descriptor: PropertyDescriptor,\n) => {\n  const original = descriptor.value;\n\n  async function interceptor(\n    this: ZilliqaModule,\n    arg: Signable,\n    ...args: any[]\n  ) {\n    if (original && arg.bytes) {\n      const signed = await this.signer.sign(arg);\n      return original.call(this, signed, ...args);\n    }\n  }\n\n  descriptor.value = interceptor;\n  return descriptor;\n};\n","//  This file is part of Zilliqa-Javascript-Library.\n//\n//  This program is free software: you can redistribute it and/or modify\n//  it under the terms of the GNU General Public License as published by\n//  the Free Software Foundation, either version 3 of the License, or\n//  (at your option) any later version.\n//\n//   This program is distributed in the hope that it will be useful,\n//   but WITHOUT ANY WARRANTY; without even the implied warranty of\n//   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//   GNU General Public License for more details.\n//\n//   You should have received a copy of the GNU General Public License\n//   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nexport { sign } from './sign';\n","//  This file is part of Zilliqa-Javascript-Library.\n//\n//  This program is free software: you can redistribute it and/or modify\n//  it under the terms of the GNU General Public License as published by\n//  the Free Software Foundation, either version 3 of the License, or\n//  (at your option) any later version.\n//\n//   This program is distributed in the hope that it will be useful,\n//   but WITHOUT ANY WARRANTY; without even the implied warranty of\n//   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//   GNU General Public License for more details.\n//\n//   You should have received a copy of the GNU General Public License\n//   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport fetch from 'cross-fetch';\n// import { validation } from '@zilliqa-js/util';\nimport { WithRequest } from './util';\n\n/**\n * blockchain-side.\n */\nexport const enum RPCMethod {\n  // Network-related methods\n  GetNetworkId = 'GetNetworkId',\n\n  // Blockchain-related methods\n  GetBlockchainInfo = 'GetBlockchainInfo',\n  GetShardingStructure = 'GetShardingStructure',\n  GetDSBlock = 'GetDsBlock',\n  GetLatestDSBlock = 'GetLatestDsBlock',\n  GetNumDSBlocks = 'GetNumDSBlocks',\n  GetDSBlockRate = 'GetDSBlockRate',\n  DSBlockListing = 'DSBlockListing',\n  GetTxBlock = 'GetTxBlock',\n  GetLatestTxBlock = 'GetLatestTxBlock',\n  GetNumTxBlocks = 'GetNumTxBlocks',\n  GetTxBlockRate = 'GetTxBlockRate',\n  TxBlockListing = 'TxBlockListing',\n  GetNumTransactions = 'GetNumTransactions',\n  GetTransactionRate = 'GetTransactionRate',\n  GetCurrentMiniEpoch = 'GetCurrentMiniEpoch',\n  GetCurrentDSEpoch = 'GetCurrentDSEpoch',\n  GetPrevDifficulty = 'GetPrevDifficulty',\n  GetPrevDSDifficulty = 'GetPrevDSDifficulty',\n  GetTotalCoinSupply = 'GetTotalCoinSupply',\n  GetMinerInfo = 'GetMinerInfo',\n\n  // Transaction-related methods\n  CreateTransaction = 'CreateTransaction',\n  GetTransaction = 'GetTransaction',\n  GetRecentTransactions = 'GetRecentTransactions',\n  GetTransactionsForTxBlock = 'GetTransactionsForTxBlock',\n  GetTxnBodiesForTxBlock = 'GetTxnBodiesForTxBlock',\n  GetNumTxnsTxEpoch = 'GetNumTxnsTxEpoch',\n  GetNumTxnsDSEpoch = 'GetNumTxnsDSEpoch',\n  GetMinimumGasPrice = 'GetMinimumGasPrice',\n  GetPendingTxn = 'GetPendingTxn',\n  GetPendingTxns = 'GetPendingTxns',\n\n  // Contract-related methods\n  GetSmartContracts = 'GetSmartContracts',\n  GetSmartContractCode = 'GetSmartContractCode',\n  GetSmartContractInit = 'GetSmartContractInit',\n  GetSmartContractState = 'GetSmartContractState',\n  GetSmartContractSubState = 'GetSmartContractSubState',\n  GetContractAddressFromTransactionID = 'GetContractAddressFromTransactionID',\n\n  // Account-related methods\n  GetBalance = 'GetBalance',\n}\n\nexport const enum RPCErrorCode {\n  // Standard JSON-RPC 2.0 errors\n  // RPC_INVALID_REQUEST is internally mapped to HTTP_BAD_REQUEST (400).\n  // It should not be used for application-layer errors.\n  RPC_INVALID_REQUEST = -32600,\n  // RPC_METHOD_NOT_FOUND is internally mapped to HTTP_NOT_FOUND (404).\n  // It should not be used for application-layer errors.\n  RPC_METHOD_NOT_FOUND = -32601,\n  RPC_INVALID_PARAMS = -32602,\n  // RPC_INTERNAL_ERROR should only be used for genuine errors in bitcoind\n  // (for example datadir corruption).\n  RPC_INTERNAL_ERROR = -32603,\n  RPC_PARSE_ERROR = -32700,\n\n  // General application defined errors\n  RPC_MISC_ERROR = -1, // std::exception thrown in command handling\n  RPC_TYPE_ERROR = -3, // Unexpected type was passed as parameter\n  RPC_INVALID_ADDRESS_OR_KEY = -5, // Invalid address or key\n  RPC_INVALID_PARAMETER = -8, // Invalid, missing or duplicate parameter\n  RPC_DATABASE_ERROR = -20, // Database error\n  RPC_DESERIALIZATION_ERROR = -22, // Error parsing or validating structure in raw format\n  RPC_VERIFY_ERROR = -25, // General error during transaction or block submission\n  RPC_VERIFY_REJECTED = -26, // Transaction or block was rejected by network rules\n  RPC_IN_WARMUP = -28, // Client still warming up\n  RPC_METHOD_DEPRECATED = -32, // RPC method is deprecated\n}\n\nexport interface RPCRequestPayload<T> {\n  id: 1;\n  jsonrpc: '2.0';\n  method: RPCMethod;\n  params: T;\n}\n\ninterface RPCRequestOptions {\n  headers?: Headers;\n  method?: string;\n}\n\nexport interface RPCRequest<T> {\n  url: string;\n  payload: RPCRequestPayload<T>;\n  options?: RPCRequestOptions;\n}\n\ninterface RPCResponseBase {\n  jsonrpc: '2.0';\n  id: '1';\n}\n\nexport interface RPCResponseSuccess<R = any> extends RPCResponseBase {\n  result: R;\n  error: undefined;\n}\n\nexport interface RPCResponseError<E = any> extends RPCResponseBase {\n  result: undefined;\n  error: RPCError<E>;\n}\n\nexport interface RPCError<E> {\n  code: RPCErrorCode;\n  message: string;\n  data?: E;\n}\n\nexport type RPCResponse<R, E> = RPCResponseSuccess<R> | RPCResponseError<E>;\n\nexport type RPCResponseHandler<R, E, T> = (\n  response: WithRequest<RPCResponse<R, E>>,\n) => T;\n\nconst DEFAULT_HEADERS = { 'Content-Type': 'application/json' };\n\nexport const performRPC = async <R, E, D extends any[], T = RPCResponse<R, E>>(\n  request: RPCRequest<D>,\n  handler: RPCResponseHandler<R, E, T>,\n): Promise<T> => {\n  try {\n    const response = await fetch(request.url, {\n      method: 'POST',\n      cache: 'no-cache',\n      mode: 'cors',\n      redirect: 'follow',\n      referrer: 'no-referrer',\n      body: JSON.stringify(request.payload),\n      headers: {\n        ...DEFAULT_HEADERS,\n        ...((request.options && request.options.headers) || {}),\n      },\n    });\n\n    return response\n      .json()\n      .then((body) => {\n        return { ...body, req: request };\n      })\n      .then(handler);\n  } catch (err) {\n    throw err;\n  }\n};\n","//  This file is part of Zilliqa-Javascript-Library.\n//\n//  This program is free software: you can redistribute it and/or modify\n//  it under the terms of the GNU General Public License as published by\n//  the Free Software Foundation, either version 3 of the License, or\n//  (at your option) any later version.\n//\n//   This program is distributed in the hope that it will be useful,\n//   but WITHOUT ANY WARRANTY; without even the implied warranty of\n//   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//   GNU General Public License for more details.\n//\n//   You should have received a copy of the GNU General Public License\n//   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { RPCMethod, RPCRequest, RPCResponse } from './net';\n\nexport type WithRequest<T, I = any> = T & { req: RPCRequest<I> };\n\nexport type Matcher = RPCMethod | '*' | RegExp;\n\nexport interface Middleware {\n  request: {\n    use: <I, O>(fn: ReqMiddlewareFn<I, O>, match?: Matcher) => void;\n  };\n  response: {\n    use: <I, O, E>(fn: ResMiddlewareFn<I, O, E>, match?: Matcher) => void;\n  };\n}\n\nexport type Transformer<I, O> = (payload: I) => O;\n\nexport type ReqMiddlewareFn<I = any, O = any> = Transformer<\n  RPCRequest<I>,\n  RPCRequest<O>\n>;\nexport type ResMiddlewareFn<I = any, O = any, E = any> = Transformer<\n  WithRequest<RPCResponse<I, E>>,\n  WithRequest<RPCResponse<O, E>>\n>;\n\nexport function isValidResponse<T, E>(\n  response: any,\n): response is RPCResponse<T, E> {\n  if (\n    response.jsonrpc === '2.0' &&\n    (response.id === '1' || response.id === 1) &&\n    (response.error || response.result)\n  ) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function composeMiddleware<T extends ReqMiddlewareFn[]>(\n  ...fns: T\n): ReqMiddlewareFn;\nexport function composeMiddleware<T extends ResMiddlewareFn[]>(\n  ...fns: T\n): ResMiddlewareFn;\nexport function composeMiddleware(...fns: any[]): any {\n  if (fns.length === 0) {\n    return (arg: any) => arg;\n  }\n\n  if (fns.length === 1) {\n    return fns[0];\n  }\n\n  return fns.reduce((a, b) => (arg: any) => a(b(arg)));\n}\n","//  This file is part of Zilliqa-Javascript-Library.\n//\n//  This program is free software: you can redistribute it and/or modify\n//  it under the terms of the GNU General Public License as published by\n//  the Free Software Foundation, either version 3 of the License, or\n//  (at your option) any later version.\n//\n//   This program is distributed in the hope that it will be useful,\n//   but WITHOUT ANY WARRANTY; without even the implied warranty of\n//   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//   GNU General Public License for more details.\n//\n//   You should have received a copy of the GNU General Public License\n//   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { RPCMethod } from '../net';\nimport { Matcher, ReqMiddlewareFn, ResMiddlewareFn } from '../util';\n\nconst enum MiddlewareType {\n  REQ,\n  RES,\n}\n\nexport class BaseProvider {\n  middleware = {\n    request: {\n      use: <I, O>(fn: ReqMiddlewareFn<I, O>, match: Matcher = '*') => {\n        this.pushMiddleware<MiddlewareType.REQ>(fn, MiddlewareType.REQ, match);\n      },\n    },\n    response: {\n      use: <I, O, E>(fn: ResMiddlewareFn<I, O, E>, match: Matcher = '*') => {\n        this.pushMiddleware<MiddlewareType.RES>(fn, MiddlewareType.RES, match);\n      },\n    },\n  };\n\n  protected nodeURL: string;\n  protected reqMiddleware: Map<Matcher, ReqMiddlewareFn[]>;\n  protected resMiddleware: Map<Matcher, ResMiddlewareFn[]>;\n\n  constructor(\n    nodeURL: string,\n    reqMiddleware: Map<Matcher, ReqMiddlewareFn[]> = new Map(),\n    resMiddleware: Map<Matcher, ResMiddlewareFn[]> = new Map(),\n  ) {\n    this.nodeURL = nodeURL;\n    this.reqMiddleware = reqMiddleware;\n    this.resMiddleware = resMiddleware;\n  }\n\n  /**\n   * pushMiddleware\n   *\n   * Adds the middleware to the appropriate middleware map.\n   *\n   * @param {ResMiddlewareFn}\n   * @param {T} type\n   * @param {Matcher} match\n   * @returns {void}\n   */\n  protected pushMiddleware<T extends MiddlewareType>(\n    fn: T extends MiddlewareType.REQ ? ReqMiddlewareFn : ResMiddlewareFn,\n    type: T,\n    match: Matcher,\n  ): void {\n    if (type !== MiddlewareType.REQ && type !== MiddlewareType.RES) {\n      throw new Error('Please specify the type of middleware being added');\n    }\n    if (type === MiddlewareType.REQ) {\n      const current = this.reqMiddleware.get(match) || [];\n      this.reqMiddleware.set(match, [...current, <ReqMiddlewareFn>fn]);\n    } else {\n      const current = this.resMiddleware.get(match) || [];\n      this.resMiddleware.set(match, [...current, <ResMiddlewareFn>fn]);\n    }\n  }\n\n  /**\n   * getMiddleware\n   *\n   * Returns the middleware that matches the matcher provided. Note that\n   * middleware are called in order of specificity: string -> regexp ->\n   * wildcard.\n   *\n   * @param {Matcher} match\n   * @returns {[ReqMiddlewareFn[], ResMiddlewareFn[]]}\n   */\n  protected getMiddleware(\n    method: RPCMethod,\n  ): [ReqMiddlewareFn[], ResMiddlewareFn[]] {\n    const reqFns: ReqMiddlewareFn[] = [];\n    const resFns: ResMiddlewareFn[] = [];\n\n    for (const [key, transformers] of this.reqMiddleware.entries()) {\n      if (typeof key === 'string' && key !== '*' && key === method) {\n        reqFns.push(...transformers);\n      }\n\n      if (key instanceof RegExp && key.test(method)) {\n        reqFns.push(...transformers);\n      }\n\n      if (key === '*') {\n        reqFns.push(...transformers);\n      }\n    }\n\n    for (const [key, transformers] of this.resMiddleware.entries()) {\n      if (typeof key === 'string' && key !== '*' && key === method) {\n        resFns.push(...transformers);\n      }\n\n      if (key instanceof RegExp && key.test(method)) {\n        resFns.push(...transformers);\n      }\n\n      if (key === '*') {\n        resFns.push(...transformers);\n      }\n    }\n\n    return [reqFns, resFns];\n  }\n}\n","//  This file is part of Zilliqa-Javascript-Library.\n//\n//  This program is free software: you can redistribute it and/or modify\n//  it under the terms of the GNU General Public License as published by\n//  the Free Software Foundation, either version 3 of the License, or\n//  (at your option) any later version.\n//\n//   This program is distributed in the hope that it will be useful,\n//   but WITHOUT ANY WARRANTY; without even the implied warranty of\n//   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//   GNU General Public License for more details.\n//\n//   You should have received a copy of the GNU General Public License\n//   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { BaseProvider } from './base';\nimport { RPCMethod, RPCRequest, RPCResponse, performRPC } from '../net';\nimport { composeMiddleware } from '../util';\nimport { Provider, Subscriber } from '../types';\n\nexport class HTTPProvider extends BaseProvider implements Provider {\n  buildPayload<T extends any[]>(method: RPCMethod, params: T): RPCRequest<T> {\n    return {\n      url: this.nodeURL,\n      payload: { id: 1, jsonrpc: '2.0', method, params },\n    };\n  }\n\n  send<P extends any[], R = any, E = string>(\n    method: RPCMethod,\n    ...params: P\n  ): Promise<RPCResponse<R, E>> {\n    const [tReq, tRes] = this.getMiddleware(method);\n    const reqMiddleware = composeMiddleware(...tReq);\n    const resMiddleware = composeMiddleware(...tRes);\n\n    const req = reqMiddleware(this.buildPayload(method, params));\n\n    return performRPC(req, resMiddleware);\n  }\n\n  subscribe(event: string, subscriber: Subscriber): symbol {\n    throw new Error('HTTPProvider does not support subscriptions.');\n  }\n\n  unsubscribe(token: symbol) {\n    throw new Error('HTTPProvider does not support subscriptions.');\n  }\n}\n","//  This file is part of Zilliqa-Javascript-Library.\n//\n//  This program is free software: you can redistribute it and/or modify\n//  it under the terms of the GNU General Public License as published by\n//  the Free Software Foundation, either version 3 of the License, or\n//  (at your option) any later version.\n//\n//   This program is distributed in the hope that it will be useful,\n//   but WITHOUT ANY WARRANTY; without even the implied warranty of\n//   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//   GNU General Public License for more details.\n//\n//   You should have received a copy of the GNU General Public License\n//   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// this constant is used to indicate the number of times to poll the\n// blockchain for a transaction confirmation. this number has been selected by\n// using a heuristic to calculate the approximate maximum amount of time it\n// should take for a transaction to be confirmed, even during a PoW submission\n// round.\nexport const GET_TX_ATTEMPTS = 33;\n","import mitt from 'mitt';\n\nclass EventEmitter<T> {\n  off: (type: string, handler: mitt.Handler) => void;\n  emit: (type: string, event?: any) => void;\n  promise: Promise<T>;\n  resolve?: (value?: T | PromiseLike<T>) => void;\n  reject?: (reason?: any) => void;\n  then?: any;\n  private handlers?: any = {};\n  private emitter: mitt.Emitter;\n  constructor() {\n    this.emitter = new mitt(this.handlers);\n    this.off = this.emitter.off.bind(this);\n    this.emit = this.emitter.emit.bind(this);\n    // tslint:disable-next-line: no-empty\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n    this.then = this.promise.then.bind(this.promise);\n  }\n\n  resetHandlers() {\n    // tslint:disable-next-line: forin\n    for (const i in this.handlers) {\n      delete this.handlers[i];\n    }\n  }\n  on(type: string, handler: mitt.Handler) {\n    this.emitter.on(type, handler);\n    return this;\n  }\n  once(type: string, handler: mitt.Handler) {\n    this.emitter.on(type, (e: any) => {\n      handler(e);\n      this.removeEventListener(type);\n    });\n  }\n\n  addEventListener(type: string, handler: mitt.Handler) {\n    this.emitter.on(type, handler);\n  }\n\n  removeEventListener(type?: string, handler?: mitt.Handler) {\n    if (!type) {\n      this.handlers = {};\n      return;\n    }\n    if (!handler) {\n      delete this.handlers[type];\n    } else {\n      return this.emitter.off(type, handler);\n    }\n  }\n  onError(error: any) {\n    this.emitter.on('error', error);\n    this.removeEventListener('*');\n  }\n  onData(data: any) {\n    this.emitter.on('data', data);\n    this.removeEventListener('*');\n  }\n  listenerCount(listenKey: any) {\n    let count = 0;\n    Object.keys(this.handlers).forEach((val) => {\n      if (listenKey === val) {\n        count += 1;\n      }\n    });\n    return count;\n  }\n}\n\nexport { EventEmitter };\n","//  This file is part of Zilliqa-Javascript-Library.\n//\n//  This program is free software: you can redistribute it and/or modify\n//  it under the terms of the GNU General Public License as published by\n//  the Free Software Foundation, either version 3 of the License, or\n//  (at your option) any later version.\n//\n//   This program is distributed in the hope that it will be useful,\n//   but WITHOUT ANY WARRANTY; without even the implied warranty of\n//   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//   GNU General Public License for more details.\n//\n//   You should have received a copy of the GNU General Public License\n//   along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nexport * from './types';\nexport * from './decorators';\nexport * from './net';\nexport * from './util';\nexport * from './providers/http';\nexport * from './constants';\nexport * from './eventEmitter';\n"]},"metadata":{},"sourceType":"script"}